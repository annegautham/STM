<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>STM¬†Log Console</title>
<style>
  :root{
    color-scheme:dark;
    --bg:#0d1117;--panel:#161b22;--border:#30363d;--text:#e6edf3;
    --incoming:#3fb950;--outgoing:#58a6ff;
    font-family:system-ui,Arial,Helvetica,sans-serif;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{display:flex;flex-direction:column;height:100vh;background:var(--bg);color:var(--text)}
  header,footer{padding:1rem 1.5rem;background:var(--panel);border:1px solid var(--border)}
  header{display:flex;align-items:center;gap:1rem;font-size:1.25rem;font-weight:600}
  #status{font-size:.9rem;opacity:.8}
  main{flex:1;overflow-y:auto;padding:1rem 1.5rem;font:0.9rem/1.4 ui-monospace,monospace}
  main div{margin:.15rem 0}
  .incoming{color:var(--incoming)}
  .outgoing{color:var(--outgoing);text-align:right}
  footer{display:flex;gap:.5rem;align-items:center;border-top:none}
  input{flex:1;padding:.5rem .75rem;border:1px solid var(--border);border-radius:6px;background:var(--bg);color:var(--text)}
  button{padding:.5rem 1.25rem;border:none;border-radius:6px;background:#238636;color:#fff;font-weight:600;cursor:pointer}
  button:disabled{background:#2ea04380;cursor:not-allowed}
</style>
</head>
<body>
  <header>
    STM¬†Log¬†Console
    <span id="status">‚è≥¬†connecting‚Ä¶</span>
  </header>

  <main id="log"></main>

  <footer>
    <input id="msg" placeholder="Type a message & hit Enter‚Ä¶" autocomplete="off" />
    <button id="sendBtn">Send</button>
  </footer>

<script>
(() => {
  const WS_PATH = '/ws';                     // adjust if your endpoint differs
  const ws = new WebSocket(`ws://${location.host}${WS_PATH}`);
  ws.binaryType = 'arraybuffer';

  const log    = document.getElementById('log');
  const input  = document.getElementById('msg');
  const sendBt = document.getElementById('sendBtn');
  const stat   = document.getElementById('status');

  function addLine(text, cls){
    const d=document.createElement('div');
    d.className=cls;
    d.textContent=text;
    log.appendChild(d);
    log.scrollTop=log.scrollHeight;
  }

  ws.onopen   = () => {stat.textContent='üü¢¬†connected';   sendBt.disabled=false;};
  ws.onclose  = () => {stat.textContent='üî¥¬†disconnected'; sendBt.disabled=true;};
  ws.onerror  = () => {stat.textContent='‚ö†Ô∏è¬†error';};
  ws.onmessage= ev => {
    if (typeof ev.data === 'string'){
      addLine(ev.data,'incoming');
    }else{
      addLine(`(binary ${ev.data.byteLength}¬†bytes)`,'incoming');
    }
  };

  function send(){
    const txt=input.value.trim();
    if(!txt||ws.readyState!==1) return;
    ws.send(txt);
    addLine(txt,'outgoing');
    input.value='';
  }
  sendBt.onclick=send;
  input.addEventListener('keydown',e=>{if(e.key==='Enter')send();});

  sendBt.disabled=true;  // until websocket opens
})();
</script>
</body>
</html>
